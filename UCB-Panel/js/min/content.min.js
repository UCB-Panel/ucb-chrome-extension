/*
Author:     UCB-Panel Team
Project:    UCB-Panel
License:    GPL v3
Build date: 28.10.2013 
*/
(function(){var a,b,c,d,e,f,g,h,i,j,k,l,m;b=function(){function a(a,b,c,d,e){this.classes=a,this.icon=b,this.text=c,this.value=d,this.id=e}return a}(),a=function(){function a(a,b,c,d,e){this.classes=a,this.icon=b,this.text=c,this.value=d,this.id=e}return a}(),m="test",h=function(a){var b;return b=$('<button class="'+a.classes+'" type="button" id="'+a.id+'" value="'+a.value+'"><div class="'+a.icon+'"></div>'+a.text+"</button><br>"),b.click(function(){return chrome.tabs.create({url:a.value})})},j=function(a){var b;return b=$('<button class="'+a.classes+'" type="button" id="'+a.id+'" value="'+a.value+'" data-toggle="tooltip" data-placement="top" title=""'+' data-original-title="'+a.text+'" >'+'<i class="'+a.icon+'"></i >'+"</button>"),b.click(function(){return chrome.tabs.create({url:a.value})})},c=function(a,b,c){var d,e,f,g;for(f=a.length,d=null,e=0,g=[];f>e;)d=a[e],c?$(b).append(j(d)):$(b).append(h(d)),g.push(e++);return g},i=function(a,b,c,d){var e,f;switch(e=null,f=localStorage.fav_theme){case"flat":e=$('<button class="'+a+'" value="'+b+'"><div class="'+c+'"></div>'+d+'<b class="arrow icon-angle-down"></b></button>');break;default:e=$('<button class="'+a+'" value="'+b+'"><div class="'+c+'"></div>'+d+'<div class="icon_arrow"></div></button>')}return e.click(function(){var a,b;return b=$(this),b.hasClass("trigger_active")?("flat"===f?(a=$(".arrow"),a.removeClass("icon-angle-up"),a.addClass("icon-angle-down")):$(".icon_arrow").css("background-image","url(images/arrow_down.gif)"),b.next(".ucbPanelCollapseContainer").slideToggle(300),b.removeClass("trigger_active")):($(".trigger_active").next(".ucbPanelCollapseContainer").slideToggle(300),$(".trigger_active").removeClass("trigger_active"),"flat"===f?(a=$(".arrow"),a.removeClass("icon-angle-down"),a.addClass("icon-angle-up")):$(".icon_arrow").css("background-image","url(images/arrow_up.gif)"),b.next(".ucbPanelCollapseContainer").slideToggle(300),b.addClass("trigger_active"))})},d=function(a){return $(a).append("<hr />")},k=function(){return $.get("http://traffic.campus-company.eu/",function(a){var b,c,d,e,f,g,h;for(e=a.match(/Ihr Restguthaben: <strong>\s*[0-9]*\.[0-9]* MB/),g=a.match(/von [0-9]* MB pro Monat/)+"",d=a.match(/<th>Monatssumme<\/th>\s*<th align=\"right\">[0-9]*\.?[0-9]*\,[0-9]*/)+"",h=a.match(/<th>Monatssumme<\/th>\s*<th align=\"right\">[0-9]*\.?[0-9]*\,[0-9]*<\/th>\s*<th align="right">[0-9]*\.?[0-9]*\,[0-9]*/)+"",c=new Array,f=void 0;null!=(f=a.match(/<tr class=\"(trbg1|trbg0)\">\s*<td>([0-9]{4}-[0-9]{2}-[0-9]{2})<\/td>\s*<td align=\"right\">([0-9]*\.?[0-9]*\,[0-9]*)<\/td>\s*<td align=\"right\">([0-9]*\.?[0-9]*\,[0-9]*)<\/td>\s*<td align=\"right\">([0-9]*\.?[0-9]*\,[0-9]*)<\/td>\s*<\/tr>/));)a=a.replace(/<tr class=\"(trbg1|trbg0)\">\s*<td>([0-9]{4}-[0-9]{2}-[0-9]{2})<\/td>\s*<td align=\"right\">([0-9]*\.?[0-9]*\,[0-9]*)<\/td>\s*<td align=\"right\">([0-9]*\.?[0-9]*\,[0-9]*)<\/td>\s*<td align=\"right\">([0-9]*\.?[0-9]*\,[0-9]*)<\/td>\s*<\/tr>/,""),b=new Object,b.date=Date.parse(f[2]),b.down=f[3],b.down=b.down.replace(/\./,""),b.down=b.down.replace(/,/,"."),b.down*=1,b.up=f[4],b.up=b.up.replace(/\./,""),b.up=b.up.replace(/,/,"."),b.up*=1,b.traffic=f[5],b.traffic=b.traffic.replace(/\./,""),b.traffic=b.traffic.replace(/,/,"."),b.traffic*=1,c.push(b);return"null"!==g&&(g=g.replace(/von /,"")+"",g=g.replace(RegExp(" MB pro Monat"),"")+"",g=1*g),null!=e&&(e+="",e=e.replace(/Ihr Restguthaben: <strong>\s*/,"")+"",e=e.replace(RegExp(" MB"),"")+"",e=1*e),"null"!==d?(d=d.replace(/<th>Monatssumme<\/th>\s*<th align=\"right\">/,""),d=d.replace(/\./,""),d=d.replace(/,/,"."),d*=1):d=0,"null"!==h?(h=h.replace(/<th>Monatssumme<\/th>\s*<th align=\"right\">[0-9]*\.?[0-9]*\,[0-9]*<\/th>\s*<th align="right">/,""),h=h.replace(/\./,""),h=h.replace(/,/,"."),h*=1):h=0,b=new Object,b.Traffic=e.toFixed(2)+" MB",b.TrafficGBMB=(e/1e3).toFixed(2)>1?(e/1e3).toFixed(2)+" GB":e.toFixed(2)+" MB",b.TrafficGB=(e/1e3).toFixed(2)+" GB",b.TrafficPM=g.toFixed(2)+" MB",b.TrafficPMraw=g.toFixed(2),b.TrafficPMGB=(g/1e3).toFixed(2)+" GB",b.Down=d.toFixed(2)+" MB",b.DownGB=(d/1e3).toFixed(2)+" GB",b.Up=h.toFixed(2)+" MB",b.UpGB=(h/1e3).toFixed(2)+" GB",b.dataPerDate=c,$(".traffic_up").append(b.UpGB),$(".traffic_down").append(b.DownGB),$(".traffic_total").append(b.TrafficGB)})},f=function(){var a,e,f,g,h,j,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O;switch(n=".ucbPanelButtonGroup",a="button btn btn-default menuitem-iconic ",e=a+"ucbpanel_iro collapse_item",o=localStorage.fav_theme){case"flat":A=new b(e,"icon-globe","Startseite","http://www.umwelt-campus.de/ucb/index.php","[Collapsed] UCB Startseite"),N=new b(e,"icon-calendar","Stundenplan","http://www.umwelt-campus.de/ucb/index.php?id=fachbereiche","[Collapsed] UCB Studenplan"),w=new b(e,"icon-time","Zeitplan","http://www.umwelt-campus.de/ucb/index.php?id=zeitplan","[Collapsed] UCB Zeitplan"),q=new b(e,"icon-map-marker","Campusplan","http://www.umwelt-campus.de/ucb/fileadmin/layout/ucbplan.pdf","[Collapsed] UCB Campusplan"),x=new b(e,"icon-table","Klausurplan","http://www.umwelt-campus.de/ucb/index.php?id=klausurplan","[Collapsed] UCB Klausurplan"),u=new b(e,"icon-signin","Contact","http://ucb-contact.umwelt-campus.de/","[Collapsed] UCB Contact"),p=new b(e,"icon-rss","Blog","http://blog.hochschule-trier.de/","[Collapsed] UCB Blog"),y=new b(e,"icon-facebook","Facebook-Seite","https://www.facebook.com/UmweltCampus","[Collapsed] UCB Facebook"),L=new b(e,"icon-group","Personalverzeichnis","http://www.umwelt-campus.de/ucb/index.php?id=personalverzeichnis","[Collapsed] UCB Personalverzeichnis"),v=new b(e,"icon-laptop","Rechenzentrum","http://www.umwelt-campus.de/ucb/index.php?id=rechenzentrum","[Collapsed] UCB Rechenzentrum"),G=new b(e,"icon-windows","Microsoft-Dreamspark","https://www.umwelt-campus.de/elms_login.php","[Collapsed] UCB MSDNAA"),s=new b(a+"ucbpanel_iro","icon-comments-alt","Community","http://community.umwelt-campus.de/index.php","UCB Community"),z=new b(a+"ucbpanel_gremienallee","icon-info","Gremienallee","http://www.gremienallee.de","UCB Gremienallee"),M=new b(a+"ucbpanel_studip","icon-list-alt","Stud.IP","https://studip.fh-trier.de/index.php?again=yes","UCB Stud.IP"),O=new b(a+"ucbpanel_webmail","icon-envelope","Webmail","https://exchange.umwelt-campus.de","UCB Webmail"),K=new b(a+"ucbpanel_qis","icon-bar-chart","QIS","https://qis.fh-trier.de/qisserver/rds?state=user&type=0","UCB QIS"),C=new b(a+"ucbpanel_iro","icon-sitemap","Intranet","http://www.umwelt-campus.de/ucb/index.php?id=intern","UCB Intranet"),F=new b(a+"ucbpanel_bib","icon-book","eLibrary","http://grimm.umwelt-campus.de/","UCB eLibrary"),D=new b(a+"ucbpanel_juris","icon-legal","Juris","http://www.juris.de/jportal/Zugang.jsp","UCB Juris"),I=new b(a+"ucbpanel_olat","icon-file-text-alt","OLAT","https://olat.vcrp.de","UCB OLAT"),H=new b(a+"ucbpanel_mensa","icon-food","Mensa","http://ucb.li/mensa","UCB Mensa"),E=new b(a+"ucbpanel_kadu","icon-beer","KADU Campus Kneipe","http://www.umwelt-campus.de/ucb/index.php?id=8163&L=0","UCB Campus Kneipe");break;default:A=new b(e,"icon_ucbpanel_iro","Startseite","http://www.umwelt-campus.de/ucb/index.php","[Collapsed] UCB Startseite"),q=new b(e,"icon_ucbpanel_iro","Campusplan","http://www.umwelt-campus.de/ucb/fileadmin/layout/ucbplan.pdf","[Collapsed] UCB Campusplan"),u=new b(e,"icon_ucbpanel_iro","Contact","http://ucb-contact.umwelt-campus.de/","[Collapsed] UCB Contact"),G=new b(e,"icon_ucbpanel_iro","Microsoft-Dreamspark","https://www.umwelt-campus.de/elms_login.php","[Collapsed] UCB MSDNAA"),p=new b(e,"icon_ucbpanel_iro","Blog","http://blog.hochschule-trier.de/","[Collapsed] UCB Blog"),y=new b(e,"icon_ucbpanel_iro","Facebook-Seite","https://www.facebook.com/UmweltCampus","[Collapsed] UCB Facebook"),L=new b(e,"icon_ucbpanel_iro","Personalverzeichnis","http://www.umwelt-campus.de/ucb/index.php?id=personalverzeichnis","[Collapsed] UCB Personalverzeichnis"),v=new b(e,"icon_ucbpanel_iro","Rechenzentrum","http://www.umwelt-campus.de/ucb/index.php?id=rechenzentrum","[Collapsed] UCB Rechenzentrum"),x=new b(e,"icon_ucbpanel_iro","Klausurplan","http://www.umwelt-campus.de/ucb/index.php?id=klausurplan","[Collapsed] UCB Klausurplan"),w=new b(e,"icon_ucbpanel_iro","Zeitplan","http://www.umwelt-campus.de/ucb/index.php?id=zeitplan","[Collapsed] UCB Zeitplan"),N=new b(e,"icon_ucbpanel_iro","Stundenplan","http://www.umwelt-campus.de/ucb/index.php?id=fachbereiche","[Collapsed] UCB Studenplan"),z=new b(a+"ucbpanel_gremienallee","icon_ucbpanel_gremienallee","Gremienallee","http://www.gremienallee.de","UCB Gremienallee"),s=new b(a+"ucbpanel_iro","icon_ucbpanel_community","Community","http://community.umwelt-campus.de/index.php","UCB Community"),K=new b(a+"ucbpanel_qis","icon_ucbpanel_qis","QIS","https://qis.fh-trier.de/qisserver/rds?state=user&type=0","UCB QIS"),O=new b(a+"ucbpanel_webmail","icon_ucbpanel_webmail","Webmail","https://exchange.umwelt-campus.de","UCB Webmail"),C=new b(a+"ucbpanel_iro","icon_ucbpanel_intranet","Intranet","http://www.umwelt-campus.de/ucb/index.php?id=intern","UCB Intranet"),F=new b(a+"ucbpanel_bib","icon_ucbpanel_bib","eLibrary","http://grimm.umwelt-campus.de/","UCB eLibrary"),M=new b(a+"ucbpanel_studip","icon_ucbpanel_studip","Stud.IP","https://studip.fh-trier.de/index.php?again=yes","UCB Stud.IP"),D=new b(a+"ucbpanel_juris","icon_ucbpanel_juris","Juris","http://www.juris.de/jportal/Zugang.jsp","UCB Juris"),I=new b(a+"ucbpanel_olat","icon_ucbpanel_olat","OLAT","https://olat.vcrp.de","UCB OLAT"),H=new b(a+"ucbpanel_mensa","icon_ucbpanel_mensa","Mensa","http://ucb.li/mensa","UCB Mensa"),E=new b(a+"ucbpanel_kadu","icon_ucbpanel_kadu","KADU Campus Kneipe","http://www.umwelt-campus.de/ucb/index.php?id=8163&L=0","UCB Campus Kneipe")}return $(n).append(i("btn btn-default trigger menuitem-iconic","%COLLAPSE%","icon_ucbpanel_iro","Umwelt-Campus")),$(n).append('<div class="ucbPanelCollapseContainer"></div>'),r=[A,N,w,q,x,u,p,y,L,v,G],c(r,".ucbPanelCollapseContainer"),d(n),t=[s,z],c(t,".ucbPanelButtonGroup"),d(n),B=[M,O,K,C,F,D,I],c(B,".ucbPanelButtonGroup"),d(n),J=[H,E],c(J,".ucbPanelButtonGroup"),$(n).append(i(a+"ucbpanel_mensa trigger","%COLLAPSE%","icon_ucbpanel_mensa","Mensa")),$(n).append('<div class="ucbPanelCollapseContainer ucbMensaCollapse" id="ucbMensaCollapse"></div>'),$.get("http://infotv.umwelt-campus.de/mensa/xml/mensa.xml",function(a){var b;return b=$.xml2json(a),$("#ucbMensaCollapse").append(b),console.log(b)}),jQuery.ajax({url:"http://infotv.umwelt-campus.de/mensa/xml/mensa.xml",success:function(){return $(".ucbMensaCollapse").waitUntilExists(function(a){var b;return b=$.xml2json(a),$(".ucbMensaCollapse").append(b),console.log(b)})},async:!1}),$.get("http://traffic.campus-company.eu/",function(a){var b,c;if(c=a.match(/Ihre IP-Adresse: 143.93.4[0-2]{1}.[0-9]{1,3}/)+"",c=c.replace(/Ihre IP-Adresse: /,"")+"","null"!==c){switch(d(n),o=localStorage.fav_theme){case"flat":b=$('<button class="button btn btn-default menuitem-iconic ucbpanel_traffic" type="button" id="Campus Company Traffic" value="http://traffic.campus-company.eu"><div class="icon-dashboard"></div>Rest-Traffic:&nbsp;<b class="traffic_total"> </b></button>'),b.click(function(){return chrome.tabs.create({url:"http://traffic.campus-company.eu"})}),$(".ucbPanelButtonGroup").append(b);break;default:b=$('<button class="button ucbpanel_traffic" type="button" id="Campus Company Traffic" value="http://traffic.campus-company.eu"></button>'),b.click(function(){return chrome.tabs.create({url:"http://traffic.campus-company.eu"})}),$(".ucbPanelButtonGroup").append(b),$(".ucbPanelButtonGroup").append('<div class="TrafficDisplay"></div>'),$(".TrafficDisplay").append('<div class="TrafficLeftSide"></div>'),$(".TrafficDisplay").append('<div class="TrafficRightSide"></div>'),$(".TrafficLeftSide").append('<p class="traffic_down" type="button" id="Campus Company Traffic"><span class="glyphicon glyphicon-circle-arrow-down"></span> </p>'),$(".TrafficLeftSide").append('<p class="traffic_up" type="button" id="Campus Company Traffic"><span class="glyphicon glyphicon-circle-arrow-up"></span> </p>'),$(".TrafficRightSide").append('<p class="traffic_total" type="button" id="Campus Company Traffic"><span class="glyphicon glyphicon-sort"></span> </p>')}return k()}}),j=$('		<div class="btn-group-wrap" >			<div class="btn-group center FooterInnerClass" >			</div >		</div >	'),$(".ucbPanelFooter").append(j),l=new b("btn btn-default","glyphicon glyphicon-home","Homepage","http://ucb.we-develop.de","[Footer] Hompage"),f=new b("btn btn-default","glyphicon glyphicon-question-sign","Über das UCB-Panel","http://ucb.we-develop.de/node/5","[Footer] About"),g=new b("btn btn-default","glyphicon glyphicon-bullhorn","Melde einen Bug oder Wunsch","http://ucb.we-develop.de/contact","[Footer] Bugs"),m=new b("btn btn-default","glyphicon glyphicon-cog","Einstellungen","options.html","[Footer] Settings"),h=[l,f,g,m],c(h,".FooterInnerClass",!0)},e=function(){},g=function(){var a;switch($(".ucbMainPanel").append('<div class="ucbPanelButtonGroup"></div>'),a=window.navigator.language){case"de":return f();case"en":return e();default:return e()}},l=function(){var a;return g(),$(".trigger").not(".trigger_active").next(".ucbPanelCollapseContainer").hide(),a=$(this),a.hasClass("trigger_active")||$(".icon_arrow").css("background-image","url(images/arrow_down.gif)"),$(".ucbMainPanel").slimScroll({height:"502px",color:"#666",size:"5px",alwaysVisible:!0}),$("#footer").tooltip({selector:"[data-toggle=tooltip]",container:"body"}),$("#footer").tooltip()},l()}).call(this);